import{_ as o,o as a,c as n,ai as i}from"./chunks/framework.Bm4BMKaq.js";const m=JSON.parse('{"title":"How Standard Library Works","description":"","frontmatter":{},"headers":[],"relativePath":"explanation/how-it-works/std/index.md","filePath":"explanation/how-it-works/std/index.md"}'),r={name:"explanation/how-it-works/std/index.md"};function s(t,e,d,l,c,h){return a(),n("div",null,[...e[0]||(e[0]=[i('<h1 id="how-standard-library-works" tabindex="-1">How Standard Library Works <a class="header-anchor" href="#how-standard-library-works" aria-label="Permalink to “How Standard Library Works”">​</a></h1><p>How the standard library plugins and pack work — what they inject during <code>onInit</code> and how help rendering is implemented.</p><h2 id="plugins" tabindex="-1">Plugins <a class="header-anchor" href="#plugins" aria-label="Permalink to “Plugins”">​</a></h2><p>The standard library consists of two plugins:</p><h3 id="helpplugin" tabindex="-1"><code>helpPlugin</code> <a class="header-anchor" href="#helpplugin" aria-label="Permalink to “helpPlugin”">​</a></h3><p>Uses <code>onInit</code> to mutate the CLI structure:</p><ul><li><strong>No root command exists</strong> — creates one with help command as default handler and injects <code>help</code> subcommand</li><li><strong>Root command exists</strong> — preserves existing definition and appends <code>help</code> subcommand</li></ul><p>Adds <code>--help</code> / <code>-h</code> global option that short-circuits to render command-specific help.</p><h3 id="versionplugin" tabindex="-1"><code>versionPlugin</code> <a class="header-anchor" href="#versionplugin" aria-label="Permalink to “versionPlugin”">​</a></h3><p>Uses <code>onInit</code> to mutate the CLI structure:</p><ul><li><strong>No root command exists</strong> — creates one (with help as fallback) and injects <code>version</code> subcommand, merging <code>--version</code> into root options</li><li><strong>Root command exists</strong> — preserves existing definition, appends <code>version</code> subcommand, and merges <code>--version</code> into existing options</li></ul><h3 id="stdpack" tabindex="-1"><code>stdPack</code> <a class="header-anchor" href="#stdpack" aria-label="Permalink to “stdPack”">​</a></h3><p>Includes both <code>helpPlugin</code> and <code>versionPlugin</code>. Plugins run in order: help plugin creates root if needed, then version plugin adds version support.</p><h2 id="help-rendering" tabindex="-1">Help Rendering <a class="header-anchor" href="#help-rendering" aria-label="Permalink to “Help Rendering”">​</a></h2><p><code>showHelp()</code> dispatches based on whether a command name is provided:</p><ul><li><strong>Root help</strong> — prints usage, version, description, lists subcommands with paths and deprecation warnings</li><li><strong>Command help</strong> — searches command tree by name or path, prints usage, aliases, positional, subcommands, options (merged with global options), and examples</li></ul><p>Option rendering reads Zod internals for aliases, descriptions, and deprecation flags — the same metadata the manifest layer extracts.</p><h2 id="short-circuit-behavior" tabindex="-1">Short-Circuit Behavior <a class="header-anchor" href="#short-circuit-behavior" aria-label="Permalink to “Short-Circuit Behavior”">​</a></h2><p>Global options with handlers (like <code>--help</code> and <code>--version</code>) short-circuit the execution pipeline. When <code>executeCommand()</code> finds a global option present in parsed args with a handler, it calls the handler and <strong>returns immediately</strong> — skipping validation, plugin hooks, and the command handler entirely.</p><h2 id="version" tabindex="-1">Version <a class="header-anchor" href="#version" aria-label="Permalink to “Version”">​</a></h2><p><code>showVersion()</code> reads <code>cli.manifest.version</code> and prints it. If no version is set, it throws. The <code>--version</code> global option and <code>version</code> subcommand both delegate to this function.</p>',21)])])}const u=o(r,[["render",s]]);export{m as __pageData,u as default};
